# TCP/IP

TCP, IP ëŠ” ëª¨ë‘ í”„ë¡œí† ì½œì˜ ì¼ì¢…ì´ë‹¤. 

> ðŸ’¡**í”„ë¡œí† ì½œì€ ë¬´ì—‡ì¸ê°€?** 
> 
>  í”„ë¡œí† ì½œì€ ì»´í“¨í„° ë‚´ë¶€ì—ì„œ, ë˜ëŠ” ì»´í“¨í„° ì‚¬ì´ì—ì„œ ë°ì´í„°ì˜ êµí™˜ ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ê·œì¹™ ì²´ê³„ìž…ë‹ˆë‹¤. ê¸°ê¸° ê°„ í†µì‹ ì€ êµí™˜ë˜ëŠ” ë°ì´í„°ì˜ í˜•ì‹ì— ëŒ€í•´ ìƒí˜¸ í•©ì˜ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤. ì´ëŸ° í˜•ì‹ì„ ì •ì˜í•˜ëŠ” ê·œì¹™ì˜ ì§‘í•©ì„ í”„ë¡œí† ì½œì´ë¼ê³  í•©ë‹ˆë‹¤.
> 
> ì¶œì²˜ : MDN

## TCP

OSI 7 ê³„ì¸µ ì¤‘ ì „ì†¡ ê³„ì¸µì—ì„œ í™œìš©ë˜ëŠ” í”„ë¡œí† ì½œ ì¤‘ í•˜ë‚˜ì´ë‹¤. 3ê³„ì¸µì˜ IP í”„ë¡œí† ì½œê³¼ í•¨ê»˜ ì“°ì´ëŠ” ê²½ìš°ê°€ ë§Žì•„ TCP/IP ë¡œ í‘œí˜„í•˜ê¸°ë„ í•œë‹¤. 

### TCP íŠ¹ì§•

- ì‹ ë¢°ì„±: íŒ¨í‚· ì†ì‹¤Â·ì˜¤ë¥˜ë¥¼ ê°ì§€í•˜ê³  ìž¬ì „ì†¡ì„ í†µí•´ ë³µêµ¬í•©ë‹ˆë‹¤.
- ìˆœì„œ ë³´ìž¥: ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ë‹¨ìœ„ë¡œ ìˆœì„œë¥¼ ìœ ì§€í•˜ì—¬ ì „ì†¡í•©ë‹ˆë‹¤.
- ì—°ê²° ì§€í–¥ì : 3-way handshakeë¡œ ì—°ê²°ì„ ì„¤ì •í•˜ê³ , FIN êµí™˜ìœ¼ë¡œ ì¢…ë£Œí•©ë‹ˆë‹¤.
- ì–‘ë°©í–¥ í†µì‹ : í•œ ì—°ê²°ì—ì„œ ì–‘ë°©í–¥ ë°ì´í„° íë¦„ì„ ì§€ì›í•©ë‹ˆë‹¤.
- í¬íŠ¸ ê¸°ë°˜ ë‹¤ì¤‘í™”: IP ì£¼ì†Œ + í¬íŠ¸ ë²ˆí˜¸ ì¡°í•©ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ë³„í•©ë‹ˆë‹¤.

### TCP ì„¸ê·¸ë¨¼íŠ¸ 

![https://docs.tosspayments.com/resources/glossary/tcp#tcp-%ED%86%B5%EC%8B%A0-%EA%B3%BC%EC%A0%95](../images/tcp_segment.png)

- ì‹œí€€ìŠ¤ ë²ˆí˜¸(Sequence Number): ë°ì´í„°ì˜ ìˆœì„œë¥¼ ì¶”ì 
- ACK ë²ˆí˜¸(Ack Number): ë‹¤ìŒìœ¼ë¡œ ê¸°ëŒ€í•˜ëŠ” ë°”ì´íŠ¸ ë²ˆí˜¸
- í”Œëž˜ê·¸(Flags): SYN, ACK, FIN, RST, PSH, URG, ECE, CWR
- ìœˆë„ìš°(Window): ìˆ˜ì‹  ì¸¡ì´ í—ˆìš© ê°€ëŠ¥í•œ ë°ì´í„° í¬ê¸°
- ì²´í¬ì„¬(Checksum): í—¤ë”Â·ë°ì´í„° ì˜¤ë¥˜ ê²€ì¶œìš© (í•­ìƒ í•„ìˆ˜)

### 3 -way Handshake

3-way HandshakeëŠ” ì†¡ì‹ ì¸¡ê³¼ ìˆ˜ì‹ ì¸¡ ëª¨ë‘ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ì¤€ë¹„ê°€ ë˜ì–´ìžˆìŒì„ í™•ì¸í•˜ê³ , íŒ¨í‚· ìˆœì„œì™€ ì‹ ë¢°ì„±ì„ ë³´ìž¥í•  ìˆ˜ ìžˆëŠ” ì´ˆê¸° ìƒíƒœë¥¼ ë§žì¶”ëŠ” ê³¼ì •ì´ë‹¤. 

![https://docs.tosspayments.com/resources/glossary/tcp#tcp-%ED%95%B8%EB%93%9C%EC%85%B0%EC%9D%B4%ED%81%AC](../images/tcp-handshake.png)

> ðŸ’¡**TCPëŠ” ì™œ ì‹ ë¢°í•  ìˆ˜ ìžˆëŠ”ê°€?**
> 
> - Checksum ì„ í†µí•´ì„œ ì†ìƒì„ ë°©ì§€
> - íë¦„ ì œì–´(ìˆ˜ì‹  ìœˆë„ìš°, ZWP, ìœˆë„ìš° ìŠ¤ì¼€ì¼ë§)ë¡œ ìˆ˜ì‹  ë²„í¼ë¥¼ ë³´í˜¸
> - í˜¼ìž¡ ì œì–´(RTO ì¶”ì •, Selective ACK)ë¥¼ í†µí•´ ë„¤íŠ¸ì›Œí¬ í˜¼ìž¡ì—ë„ ëŒ€ì‘
> - ì´ˆê¸° ì‹œí€¸ìŠ¤ ë²ˆí˜¸ë¥´ ì–‘ì¸¡ì´ êµí™˜í•´ ì˜ˆì „ ì—°ê²°ì˜ ì„¸ê·¸ë¨¼íŠ¸ê°€ í˜„ìž¬ ì—°ê²°ì„ ì˜¤ì—¼ì‹œí‚¤ì§€ ì•Šë„ë¡ í•¨
> - ì—°ê²° ì¢…ë£Œ í›„ì—ë„ ìž ì‹œ ëŒ€ê¸°í•˜ì—¬ ì§€ì—° ë„ì°© ì„¸ê·¸ë¨¼íŠ¸ê°€ ë‹¤ë¥¸ ì—°ê²°ì— ì„žì´ì§€ ì•Šê²Œ ê²©ë¦¬

**TCP í˜¼ìž¡ ì œì–´ ì•Œê³ ë¦¬ì¦˜ > AIMD(Additive Increase Multiplicative Decrease)**
![](../images/TCP_AIMD.png)

### References

- https://datatracker.ietf.org/doc/html/rfc9293
- https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-TCP-IP-%EC%A0%95%EB%A6%AC-%F0%9F%91%AB%F0%9F%8F%BD-TCP-IP-4%EA%B3%84%EC%B8%B5
- https://docs.tosspayments.com/resources/glossary/tcp#tcp-%ED%86%B5%EC%8B%A0-%EA%B3%BC%EC%A0%95
- https://code-lab1.tistory.com/30